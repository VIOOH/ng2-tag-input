{"version":3,"file":"tag-input-dropdown.component.js","sourceRoot":"","sources":["../../../../modules/components/dropdown/tag-input-dropdown.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n    Component,\r\n    ViewChild,\r\n    forwardRef,\r\n    Inject,\r\n    TemplateRef,\r\n    ContentChildren,\r\n    Input,\r\n    QueryList,\r\n    HostListener,\r\n    EventEmitter\r\n} from '@angular/core';\r\n\r\nimport { Observable } from 'rxjs/Observable';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/filter';\r\n\r\nimport { TagInputComponent } from '../';\r\nimport { Ng2Dropdown, Ng2MenuItem } from 'ng2-material-dropdown';\r\nimport { TagModel } from '../../core';\r\n\r\n@Component({\r\n    selector: 'tag-input-dropdown',\r\n    templateUrl: './tag-input-dropdown.template.html'\r\n})\r\nexport class TagInputDropdown {\r\n    /**\r\n     * @name dropdown\r\n     */\r\n    @ViewChild(Ng2Dropdown) public dropdown: Ng2Dropdown;\r\n\r\n    /**\r\n     * @name menuTemplate\r\n     * @desc reference to the template if provided by the user\r\n     * @type {TemplateRef}\r\n     */\r\n    @ContentChildren(TemplateRef) public templates: QueryList<TemplateRef<any>>;\r\n    \r\n    /**\r\n     * Keep dropdown menu visible after adding item\r\n     * @name visibleMenuAfterItemAdd\r\n     * @type {boolean}\r\n     * @author Alkesh Shah\r\n     */\r\n    @Input() public visibleMenuAfterItemAdd = false;\r\n\r\n    /**\r\n     * @name offset\r\n     * @type {string}\r\n     */\r\n    @Input() public offset = '50 0';\r\n\r\n    /**\r\n     * @name focusFirstElement\r\n     * @type {boolean}\r\n     */\r\n    @Input() public focusFirstElement = false;\r\n\r\n    /**\r\n     * - show autocomplete dropdown if the value of input is empty\r\n     * @name showDropdownIfEmpty\r\n     * @type {boolean}\r\n     */\r\n    @Input() public showDropdownIfEmpty = false;\r\n\r\n    /**\r\n     * @description observable passed as input which populates the autocomplete items\r\n     * @name autocompleteObservable\r\n     */\r\n    @Input() public autocompleteObservable: (text: string) => Observable<any>;\r\n\r\n    /**\r\n     * - desc minimum text length in order to display the autocomplete dropdown\r\n     * @name minimumTextLength\r\n     */\r\n    @Input() public minimumTextLength = 1;\r\n\r\n    /**\r\n     * - number of items to display in the autocomplete dropdown\r\n     * @name limitItemsTo\r\n     */\r\n    @Input() public limitItemsTo: number;\r\n\r\n    /**\r\n     * @name displayBy\r\n     */\r\n    @Input() public displayBy = 'display';\r\n\r\n    /**\r\n     * @name identifyBy\r\n     */\r\n    @Input() public identifyBy = 'value';\r\n\r\n    /**\r\n     * @description a function a developer can use to implement custom matching for the autocomplete\r\n     * @name matchingFn\r\n     */\r\n    @Input() public matchingFn: (value: string, target: TagModel) => boolean =\r\n         (value: string, target: TagModel): boolean => {\r\n            const targetValue = target[this.displayBy].toString();\r\n\r\n            return targetValue && targetValue\r\n                .toLowerCase()\r\n                .indexOf(value.toLowerCase()) >= 0;\r\n    }\r\n\r\n    /**\r\n     * @name appendToBody\r\n     * @type {boolean}\r\n     */\r\n    @Input() public appendToBody = true;\r\n\r\n    /**\r\n     * list of items that match the current value of the input (for autocomplete)\r\n     * @name items\r\n     * @type {TagModel[]}\r\n     */\r\n    public items: TagModel[] = [];\r\n\r\n    /**\r\n     * @name _autocompleteItems\r\n     * @type {Array}\r\n     * @private\r\n     */\r\n    private _autocompleteItems: TagModel[] = [];\r\n\r\n    /**\r\n     * @name autocompleteItems\r\n     * @param items\r\n     */\r\n    public set autocompleteItems(items: TagModel[]) {\r\n        this._autocompleteItems = items;\r\n    }\r\n\r\n    /**\r\n     * @name autocompleteItems\r\n     * @desc array of items that will populate the autocomplete\r\n     * @type {Array<string>}\r\n     */\r\n    @Input() public get autocompleteItems(): TagModel[] {\r\n        const items = this._autocompleteItems;\r\n\r\n        if (!items) {\r\n            return [];\r\n        }\r\n\r\n        return items.map((item: TagModel) => {\r\n            return typeof item === 'string' ? {\r\n                [this.displayBy]: item,\r\n                [this.identifyBy]: item\r\n            } : item;\r\n        });\r\n    }\r\n\r\n    constructor(@Inject(forwardRef(() => TagInputComponent)) private tagInput: TagInputComponent) {}\r\n\r\n    public ngOnInit() {\r\n        this.onItemClicked()\r\n            .subscribe(this.addNewItem.bind(this));\r\n\r\n        // reset itemsMatching array when the dropdown is hidden\r\n        this.onHide()\r\n            .subscribe(this.resetItems.bind(this));\r\n\r\n        this.tagInput.inputForm.onKeyup\r\n            .subscribe(this.show.bind(this));\r\n\r\n        if (this.autocompleteObservable) {\r\n            this.tagInput\r\n                .onTextChange\r\n                .filter((text: string) => text.trim().length >= this.minimumTextLength)\r\n                .subscribe(this.getItemsFromObservable.bind(this));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name updatePosition\r\n     */\r\n    public updatePosition(): void {\r\n        this.dropdown.menu.updatePosition(this.tagInput.inputForm.getElementPosition());\r\n    }\r\n\r\n    /**\r\n     * @name isVisible\r\n     * @returns {boolean}\r\n     */\r\n    public get isVisible(): boolean {\r\n        return this.dropdown.menu.state.menuState.isVisible;\r\n    }\r\n\r\n    /**\r\n     * @name onHide\r\n     * @returns {EventEmitter<Ng2Dropdown>}\r\n     */\r\n    public onHide(): EventEmitter<Ng2Dropdown> {\r\n        return this.dropdown.onHide;\r\n    }\r\n\r\n    /**\r\n     * @name onItemClicked\r\n     * @returns {EventEmitter<string>}\r\n     */\r\n    public onItemClicked(): EventEmitter<string> {\r\n        return this.dropdown.onItemClicked;\r\n    }\r\n\r\n    /**\r\n     * @name selectedItem\r\n     * @returns {Ng2MenuItem}\r\n     */\r\n    public get selectedItem(): Ng2MenuItem {\r\n        return this.dropdown.menu.state.dropdownState.selectedItem;\r\n    }\r\n\r\n    /**\r\n     * @name state\r\n     * @returns {DropdownStateService}\r\n     */\r\n    public get state(): any {\r\n        return this.dropdown.menu.state;\r\n    }\r\n\r\n    /**\r\n     * @name addNewItem\r\n     * @param item {Ng2MenuItem}\r\n     */\r\n    private addNewItem(item: Ng2MenuItem): void {\r\n        if (!item) {\r\n            return;\r\n        }\r\n\r\n        const display = typeof item.value === 'string' ? item.value : item.value[this.displayBy];\r\n        const value = typeof item.value === 'string' ? item.value : item.value[this.identifyBy];\r\n        const model = {...item.value, display, value};\r\n\r\n        // add item\r\n        this.tagInput.onAddingRequested(true, model);\r\n        \r\n        //#1 - Alkesh Shah\r\n        if(this.visibleMenuAfterItemAdd) {\r\n            item.preventClose = true; \r\n        }\r\n        else {\r\n            // hide dropdown\r\n            this.dropdown.hide();\r\n        }\r\n        //End 1\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @name show\r\n     */\r\n    public show(): void {\r\n        const value: string = this.tagInput.inputForm.value.value.trim();\r\n        const position: ClientRect = this.tagInput.inputForm.getElementPosition();\r\n        const items: TagModel[] = this.getMatchingItems(value);\r\n        const hasItems: boolean = items.length > 0;\r\n        const showDropdownIfEmpty: boolean = this.showDropdownIfEmpty && hasItems && !value;\r\n        const hasMinimumText: boolean = value.length >= this.minimumTextLength;\r\n\r\n        const assertions: boolean[] = [\r\n            hasItems,\r\n            this.isVisible === false,\r\n            hasMinimumText\r\n        ];\r\n\r\n        const showDropdown: boolean = (assertions.filter(item => item).length === assertions.length) ||\r\n            showDropdownIfEmpty;\r\n        const hideDropdown: boolean = this.isVisible && (!hasItems || !hasMinimumText);\r\n\r\n        // set items\r\n        this.setItems(items);\r\n\r\n        if (showDropdown && !this.isVisible) {\r\n            this.dropdown.show(position);\r\n        } else if (hideDropdown) {\r\n            this.dropdown.hide();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @name scrollListener\r\n     */\r\n    @HostListener('window:scroll')\r\n    public scrollListener(): void {\r\n        if (!this.isVisible) {\r\n            return;\r\n        }\r\n\r\n        this.updatePosition();\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param value\r\n     * @returns {any}\r\n     */\r\n    private getMatchingItems(value: string): TagModel[] {\r\n        if (!value && !this.showDropdownIfEmpty) {\r\n            return [];\r\n        }\r\n\r\n        return this.autocompleteItems.filter((item: TagModel) => {\r\n            const hasValue: boolean = this.tagInput.tags.some(tag => {\r\n                const identifyBy = this.tagInput.identifyBy;\r\n                const model = typeof tag.model === 'string' ? tag.model : tag.model[identifyBy];\r\n\r\n                return model === item[this.identifyBy];\r\n            });\r\n\r\n            return this.matchingFn(value, item) && hasValue === false;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @name setItems\r\n     */\r\n    private setItems(items: TagModel[]): void {\r\n        this.items = items.slice(0, this.limitItemsTo || items.length);\r\n    }\r\n\r\n    /**\r\n     * @name resetItems\r\n     */\r\n    private resetItems(): void {\r\n        this.items = [];\r\n    }\r\n\r\n    /**\r\n     * @name populateItems\r\n     * @param data\r\n     */\r\n    private populateItems(data: any): TagInputDropdown {\r\n        this.autocompleteItems = data.map(item => {\r\n            return typeof item === 'string' ? {\r\n                [this.displayBy]: item,\r\n                [this.identifyBy]: item\r\n            } : item;\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * @name getItemsFromObservable\r\n     * @param text\r\n     */\r\n    private getItemsFromObservable(text: string): void {\r\n        this.setLoadingState(true);\r\n\r\n        this.autocompleteObservable(text)\r\n            .subscribe(data => {\r\n                // hide loading animation\r\n                this.setLoadingState(false)\r\n                    // add items\r\n                    .populateItems(data)\r\n                    // show the dropdown\r\n                    .show();\r\n\r\n        }, () => this.setLoadingState(false));\r\n    }\r\n\r\n    /**\r\n     * @name setLoadingState\r\n     * @param state\r\n     * @return {TagInputDropdown}\r\n     */\r\n    private setLoadingState(state: boolean): TagInputDropdown {\r\n        this.tagInput.isLoading = state;\r\n\r\n        return this;\r\n    }\r\n}\r\n"]}